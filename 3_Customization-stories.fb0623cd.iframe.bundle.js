"use strict";(self.webpackChunk_bits_devel_react_diagrams_gallery=self.webpackChunk_bits_devel_react_diagrams_gallery||[]).push([[140],{"../node_modules/.pnpm/@storybook+addon-actions@8.6.10_storybook@8.6.10_prettier@3.5.3_/node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{XI:()=>action});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/internal/preview-api"),external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_=__webpack_require__("storybook/internal/preview-errors"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),v4=__webpack_require__("../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v4.js"),__defProp=Object.defineProperty,ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a},generateId=()=>"object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2);function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!globalThis?.FEATURES?.disallowImplicitActionsInRenderV8,error=new external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_.ImplicitActionsDuringRendering({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id=generateId(),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler.implicit=options.implicit,handler}var preview_exports={};((target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})})(preview_exports,{argsEnhancers:()=>argsEnhancers,loaders:()=>loaders});var isInInitialArgs=(name,initialArgs)=>typeof initialArgs[name]>"u"&&!(name in initialArgs),argsEnhancers=[context=>{let{initialArgs,argTypes,parameters:{actions:actions2}}=context;return actions2?.disable||!argTypes?{}:Object.entries(argTypes).filter((([name,argType])=>!!argType.action)).reduce(((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action("string"==typeof argType.action?argType.action:name)),acc)),{})},context=>{let{initialArgs,argTypes,id,parameters:{actions:actions2}}=context;if(!actions2||actions2.disable||!actions2.argTypesRegex||!argTypes)return{};let argTypesRegex=new RegExp(actions2.argTypesRegex);return Object.entries(argTypes).filter((([name])=>!!argTypesRegex.test(name))).reduce(((acc,[name,argType])=>(isInInitialArgs(name,initialArgs)&&(acc[name]=action(name,{implicit:!0,id})),acc)),{})}],subscribed=!1,loaders=[context=>{let{parameters:{actions:actions2}}=context;if(!actions2?.disable&&!subscribed&&"__STORYBOOK_TEST_ON_MOCK_CALL__"in external_STORYBOOK_MODULE_GLOBAL_.global&&"function"==typeof external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_TEST_ON_MOCK_CALL__){(0,external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_TEST_ON_MOCK_CALL__)(((mock,args)=>{let name=mock.getMockName();"spy"!==name&&(!/^next\/.*::/.test(name)||["next/router::useRouter()","next/navigation::useRouter()","next/navigation::redirect","next/cache::","next/headers::cookies().set","next/headers::cookies().delete","next/headers::headers().set","next/headers::headers().delete"].some((prefix=>name.startsWith(prefix))))&&action(name)(args)})),subscribed=!0}}]},"./demos/3_Customization.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomAnimatedLinks:()=>CustomAnimatedLinks,CustomDiamondNode:()=>CustomDiamondNode,CustomEvent:()=>CustomEvent,CustomLinkEndsWithArrows:()=>CustomLinkEndsWithArrows,CustomLinkLabel:()=>CustomLinkLabel,__namedExportsOrder:()=>__namedExportsOrder,default:()=>_3_Customization_stories});var dist=__webpack_require__("../packages/react-canvas-core/dist/index.js"),react=__webpack_require__("../node_modules/.pnpm/react@19.0.0/node_modules/react/index.js"),react_diagrams_dist=__webpack_require__("../packages/react-diagrams/dist/index.js"),DemoCanvasWidget=__webpack_require__("./demos/helpers/DemoCanvasWidget.tsx");class EditableLabelModel extends react_diagrams_dist.ed{constructor(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({...options,type:"editable-label"}),this.value=options.value||""}serialize(){return{...super.serialize(),value:this.value}}deserialize(event){super.deserialize(event),this.value=event.data.value}}var emotion_styled_browser_esm=__webpack_require__("../node_modules/.pnpm/@emotion+styled@11.14.0_@emotion+react@11.14.0_@types+react@19.0.12_react@19.0.0__@types+react@19.0.12_react@19.0.0/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),addon_actions_dist=__webpack_require__("../node_modules/.pnpm/@storybook+addon-actions@8.6.10_storybook@8.6.10_prettier@3.5.3_/node_modules/@storybook/addon-actions/dist/index.mjs");let S;(S||(S={})).Label=emotion_styled_browser_esm.A.div`
		user-select: none;
		pointer-events: auto;
	`;const EditableLabelWidget=props=>{const[str,setStr]=react.useState(props.model.value);return react.createElement(S.Label,null,react.createElement("input",{value:str,onChange:event=>{const newVal=event.target.value;setStr(newVal),props.model.value=newVal}}),react.createElement("button",{onClick:()=>(0,addon_actions_dist.XI)("model eventDidFire")("You clicked the button")},"Click me!"))};class EditableLabelFactory extends dist.IT{constructor(){super("editable-label")}generateModel(){return new EditableLabelModel}generateReactWidget(event){return react.createElement(EditableLabelWidget,{model:event.model})}}var forEach=__webpack_require__("../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/forEach.js"),forEach_default=__webpack_require__.n(forEach);class CustomDeleteItemsAction extends dist.rc{constructor(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};options={keyCodes:[46,8],...options},super({type:dist.NZ.KEY_DOWN,fire:event=>{if(-1!==options.keyCodes.indexOf(event.event.keyCode)){const selectedEntities=this.engine.getModel().getSelectedEntities();if(selectedEntities.length>0){window.confirm("Are you sure you want to delete?")&&(forEach_default()(selectedEntities,(model=>{model.isLocked()||model.remove()})),this.engine.repaintCanvas())}}}})}}class DiamondPortModel extends react_diagrams_dist.Pi{constructor(alignment){super({type:"diamond",name:alignment,alignment})}createLinkModel(){return new react_diagrams_dist.X0}}class DiamondNodeModel extends react_diagrams_dist.iL{constructor(){super({type:"diamond"}),this.addPort(new DiamondPortModel(react_diagrams_dist.wD.TOP)),this.addPort(new DiamondPortModel(react_diagrams_dist.wD.LEFT)),this.addPort(new DiamondPortModel(react_diagrams_dist.wD.BOTTOM)),this.addPort(new DiamondPortModel(react_diagrams_dist.wD.RIGHT))}}let DiamondNodeWidget_S;!function(_S){_S.Port=emotion_styled_browser_esm.A.div`
		width: 16px;
		height: 16px;
		z-index: 10;
		background: rgba(0, 0, 0, 0.5);
		border-radius: 8px;
		cursor: pointer;

		&:hover {
			background: rgba(0, 0, 0, 1);
		}
	`}(DiamondNodeWidget_S||(DiamondNodeWidget_S={}));class DiamondNodeWidget extends react.Component{render(){return react.createElement("div",{className:"diamond-node",style:{position:"relative",width:this.props.size,height:this.props.size}},react.createElement("svg",{width:this.props.size,height:this.props.size,dangerouslySetInnerHTML:{__html:`\n          <g id="Layer_1">\n          </g>\n          <g id="Layer_2">\n            <polygon fill="mediumpurple" stroke="${this.props.node.isSelected()?"white":"#000000"}" stroke-width="3" stroke-miterlimit="10" points="10,`+this.props.size/2+" "+this.props.size/2+",10 "+(this.props.size-10)+","+this.props.size/2+" "+this.props.size/2+","+(this.props.size-10)+' "/>\n          </g>\n        '}}),react.createElement(react_diagrams_dist._F,{style:{top:this.props.size/2-8,left:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.wD.LEFT),engine:this.props.engine},react.createElement(DiamondNodeWidget_S.Port,null)),react.createElement(react_diagrams_dist._F,{style:{left:this.props.size/2-8,top:-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.wD.TOP),engine:this.props.engine},react.createElement(DiamondNodeWidget_S.Port,null)),react.createElement(react_diagrams_dist._F,{style:{left:this.props.size-8,top:this.props.size/2-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.wD.RIGHT),engine:this.props.engine},react.createElement(DiamondNodeWidget_S.Port,null)),react.createElement(react_diagrams_dist._F,{style:{left:this.props.size/2-8,top:this.props.size-8,position:"absolute"},port:this.props.node.getPort(react_diagrams_dist.wD.BOTTOM),engine:this.props.engine},react.createElement(DiamondNodeWidget_S.Port,null)))}}class DiamondNodeFactory extends dist.IT{constructor(){super("diamond")}generateReactWidget(event){return react.createElement(DiamondNodeWidget,{engine:this.engine,size:50,node:event.model})}generateModel(event){return new DiamondNodeModel}}class SimplePortFactory extends dist.U6{constructor(type,cb){super(type),this.cb=cb}generateModel(event){return this.cb(event.initialConfig)}}class AdvancedLinkModel extends react_diagrams_dist.X0{constructor(){super({type:"advanced",width:10})}}class AdvancedPortModel extends react_diagrams_dist.QO{createLinkModel(){return new AdvancedLinkModel}}class AdvancedLinkSegment extends react.Component{constructor(props){super(props),this.percent=0}componentDidMount(){this.mounted=!0,this.callback=()=>{if(!this.circle||!this.path)return;this.percent+=2,this.percent>100&&(this.percent=0);let point=this.path.getPointAtLength(this.path.getTotalLength()*(this.percent/100));this.circle.setAttribute("cx",""+point.x),this.circle.setAttribute("cy",""+point.y),this.mounted&&requestAnimationFrame(this.callback)},requestAnimationFrame(this.callback)}componentWillUnmount(){this.mounted=!1}render(){return react.createElement(react.Fragment,null,react.createElement("path",{fill:"none",ref:ref=>{this.path=ref},strokeWidth:this.props.model.getOptions().width,stroke:"rgba(255,0,0,0.5)",d:this.props.path}),react.createElement("circle",{ref:ref=>{this.circle=ref},r:10,fill:"orange"}))}}class AdvancedLinkFactory extends react_diagrams_dist.E${constructor(){super("advanced")}generateModel(){return new AdvancedLinkModel}generateLinkSegment(model,selected,path){return react.createElement("g",null,react.createElement(AdvancedLinkSegment,{model,path}))}}var react_diagrams_core_dist=__webpack_require__("../packages/react-diagrams-core/dist/index.js"),react_diagrams_defaults_dist=__webpack_require__("../packages/react-diagrams-defaults/dist/index.js");class demo_custom_link2_AdvancedLinkModel extends react_diagrams_dist.X0{constructor(){super({type:"advanced",width:4})}}class demo_custom_link2_AdvancedPortModel extends react_diagrams_dist.QO{createLinkModel(){return new demo_custom_link2_AdvancedLinkModel}}const CustomLinkArrowWidget=props=>{const{point,previousPoint}=props,angle=90+180*Math.atan2(point.getPosition().y-previousPoint.getPosition().y,point.getPosition().x-previousPoint.getPosition().x)/Math.PI;return react.createElement("g",{className:"arrow",transform:"translate("+point.getPosition().x+", "+point.getPosition().y+")"},react.createElement("g",{style:{transform:"rotate("+angle+"deg)"}},react.createElement("g",{transform:"translate(0, -3)"},react.createElement("polygon",{points:"0,10 8,30 -8,30",fill:props.color,"data-id":point.getID(),"data-linkid":point.getLink().getID()}))))};class AdvancedLinkWidget extends react.Component{generatePoint=point=>react.createElement(react_diagrams_defaults_dist.wP,{key:point.getID(),point,colorSelected:this.props.link.getOptions().selectedColor??"",color:this.props.link.getOptions().color});generateLink=(path,extraProps,id)=>react.createElement(react_diagrams_defaults_dist.Vz,{key:`link-${id}`,path,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,extras:extraProps});addPointToLink=(event,index)=>{if(!event.shiftKey&&!this.props.link.isLocked()&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){const position=this.props.diagramEngine.getRelativeMousePoint(event),point=this.props.link.point(position.x,position.y,index);event.persist(),event.stopPropagation(),this.props.diagramEngine.getActionEventBus().fireAction({event,model:point})}};generateArrow(point,previousPoint){return react.createElement(CustomLinkArrowWidget,{key:point.getID(),point,previousPoint,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}render(){var points=this.props.link.getPoints(),paths=[];for(let j=0;j<points.length-1;j++)paths.push(this.generateLink(react_diagrams_core_dist.TX.generateLinePath(points[j],points[j+1]),{"data-linkid":this.props.link.getID(),"data-point":j,onMouseDown:event=>{this.addPointToLink(event,j+1)}},j));for(let i=1;i<points.length-1;i++)paths.push(this.generatePoint(points[i]));return null!==this.props.link.getTargetPort()?paths.push(this.generateArrow(points[points.length-1],points[points.length-2])):paths.push(this.generatePoint(points[points.length-1])),react.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},paths)}}class demo_custom_link2_AdvancedLinkFactory extends react_diagrams_dist.E${constructor(){super("advanced")}generateModel(){return new demo_custom_link2_AdvancedLinkModel}generateReactWidget(event){return react.createElement(AdvancedLinkWidget,{link:event.model,diagramEngine:this.engine})}}dist.Z0.TESTING=!0;const _3_Customization_stories={title:"Customization"},CustomDiamondNode=()=>{var engine=(0,react_diagrams_dist.Ay)();engine.getPortFactories().registerFactory(new SimplePortFactory("diamond",(config=>new DiamondPortModel(react_diagrams_dist.wD.LEFT)))),engine.getNodeFactories().registerFactory(new DiamondNodeFactory);var model=new react_diagrams_dist.DQ,node1=new react_diagrams_dist.R$("Node 1","rgb(0,192,255)"),port1=node1.addOutPort("Out");node1.setPosition(100,200);var node2=new DiamondNodeModel;node2.setPosition(250,108);var node3=new react_diagrams_dist.R$("Node 3","red"),port3=node3.addInPort("In");node3.setPosition(500,100);var link1=port1.link(node2.getPort(react_diagrams_dist.wD.LEFT)),link2=port3.link(node2.getPort(react_diagrams_dist.wD.RIGHT)),node4=new react_diagrams_dist.R$("Node 4","rgb(0,192,255)"),port4=node4.addOutPort("Out");node4.setPosition(200,10);var link3=port4.link(node2.getPort(react_diagrams_dist.wD.TOP)),node5=new react_diagrams_dist.R$("Node 5","mediumpurple"),port5=node5.addInPort("In");node5.setPosition(400,300);var link4=port5.link(node2.getPort(react_diagrams_dist.wD.BOTTOM));return model.addAll(node1,node2,node3,link1,link2,node4,link3,link4,node5),engine.setModel(model),react.createElement(DemoCanvasWidget.M,null,react.createElement(dist.Nw,{engine}))},CustomAnimatedLinks=()=>{var engine=(0,react_diagrams_dist.Ay)();engine.getLinkFactories().registerFactory(new AdvancedLinkFactory);var node1=new react_diagrams_dist.R$("Source","rgb(0,192,255)");let port1=node1.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),port2=node1.addPort(new react_diagrams_dist.QO(!1,"out-2","Out default"));node1.setPosition(100,100);var node2=new react_diagrams_dist.R$("Target","rgb(192,255,0)"),port3=node2.addPort(new AdvancedPortModel(!0,"in-1","In thick")),port4=node2.addPort(new react_diagrams_dist.QO(!0,"in-2","In default"));node2.setPosition(300,100);var node3=new react_diagrams_dist.R$("Source","rgb(0,192,255)");node3.addPort(new AdvancedPortModel(!1,"out-1","Out thick")),node3.addPort(new react_diagrams_dist.QO(!1,"out-2","Out default")),node3.setPosition(100,200);var node4=new react_diagrams_dist.R$("Target","rgb(192,255,0)");node4.addPort(new AdvancedPortModel(!0,"in-1","In thick")),node4.addPort(new react_diagrams_dist.QO(!0,"in-2","In default")),node4.setPosition(300,200);var model=new react_diagrams_dist.DQ;return model.addAll(port1.link(port3),port2.link(port4)),model.addAll(node1,node2,node3,node4),engine.setModel(model),react.createElement(DemoCanvasWidget.M,null,react.createElement(dist.Nw,{engine}))},CustomLinkEndsWithArrows=()=>{var engine=(0,react_diagrams_dist.Ay)();engine.getLinkFactories().registerFactory(new demo_custom_link2_AdvancedLinkFactory);var node1=new react_diagrams_dist.R$("Source","rgb(0,192,255)");let port1=node1.addPort(new demo_custom_link2_AdvancedPortModel(!1,"out"));node1.setPosition(100,100);var node2=new react_diagrams_dist.R$("Target","rgb(192,255,0)"),port2=node2.addPort(new demo_custom_link2_AdvancedPortModel(!0,"in"));node2.setPosition(500,350);var node3=new react_diagrams_dist.R$("Source","rgb(0,192,255)");let port3=node3.addPort(new demo_custom_link2_AdvancedPortModel(!1,"out"));node3.setPosition(100,500);var node4=new react_diagrams_dist.R$("Target","rgb(192,255,0)"),port4=node4.addPort(new demo_custom_link2_AdvancedPortModel(!0,"in"));node4.setPosition(500,450);var model=new react_diagrams_dist.DQ;return model.addAll(port1.link(port2),port3.link(port4)),model.addAll(node1,node2,node3,node4),engine.setModel(model),react.createElement(DemoCanvasWidget.M,null,react.createElement(dist.Nw,{engine}))},CustomLinkLabel=()=>{const engine=(0,react_diagrams_dist.Ay)();engine.getLabelFactories().registerFactory(new EditableLabelFactory);const model=new react_diagrams_dist.DQ,node1=new react_diagrams_dist.R$("Node1","red"),port1=node1.addOutPort("out");node1.setPosition(250,100);const node2=new react_diagrams_dist.R$("Node2","green"),port2=node2.addInPort("in");node2.setPosition(800,300);const link1=port1.link(port2);return link1.addLabel(new EditableLabelModel({value:"Hello, I am label!"})),model.addAll(node1,port1,node2,port2,link1),engine.setModel(model),react.createElement(DemoCanvasWidget.M,null,react.createElement(dist.Nw,{engine}))},CustomEvent=()=>{const engine=(0,react_diagrams_dist.Ay)({registerDefaultDeleteItemsAction:!1}),model=new react_diagrams_dist.DQ,node1=new react_diagrams_dist.R$({name:"Node 1",color:"rgb(0,192,255)"});node1.setPosition(100,100);const port1=node1.addOutPort("Out"),node2=new react_diagrams_dist.R$("Node 2","rgb(192,255,0)"),port2=node2.addInPort("In");node2.setPosition(400,100);const link1=port1.link(port2);return link1.getOptions().testName="Test",link1.addLabel("Hello World!"),model.addAll(node1,node2,link1),engine.setModel(model),engine.getActionEventBus().registerAction(new CustomDeleteItemsAction),react.createElement(DemoCanvasWidget.M,null,react.createElement(dist.Nw,{engine}))},__namedExportsOrder=["CustomDiamondNode","CustomAnimatedLinks","CustomLinkEndsWithArrows","CustomLinkLabel","CustomEvent"]}}]);
//# sourceMappingURL=3_Customization-stories.fb0623cd.iframe.bundle.js.map